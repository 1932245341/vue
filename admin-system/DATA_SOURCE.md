# 数据源说明文档

本文档详细说明了前端管理系统各页面的数据来源，包括真实数据和模拟数据的使用情况。

## 数据源类型

### 真实数据（Real Data）
- **来源**：后端API接口
- **特点**：从后端数据库获取的实际数据
- **使用原则**：系统只使用真实数据，不再使用模拟数据
- **错误处理**：当API调用失败时，显示错误信息并提供重试机制

## 各页面数据源详情

### 1. 仪表板页面 (Dashboard.vue)

#### 统计卡片数据
- **数据类型**：真实数据（待开发）
- **当前状态**：显示默认值0，等待后端统计接口开发
- **数据内容**：
  - 景点数量：从后端API获取
  - 特产数量：从后端API获取
  - 停车场数量：从后端API获取
  - 今日订单：从后端API获取
- **开发计划**：需要后端提供统计数据接口

#### 图表数据
- **数据类型**：模拟数据
- **状态**：占位符显示
- **后续计划**：集成ECharts，使用真实数据

### 2. 景点管理页面 (ScenicList.vue)

#### 景点列表数据
- **数据类型**：真实数据
- **数据来源**：
  - API接口：`GET /api/admin/scenic/page`
  - 后端控制器：`ScenicController.java`
- **错误处理**：当API调用失败时，显示错误信息并清空列表
- **数据处理逻辑**：
  ```javascript
  try {
    const response = await getScenicList(params)
    if (response.code === 1) {
      tableData.value = response.data.records || []
      pagination.total = response.data.total || 0
    } else {
      ElMessage.error(response.msg || '获取数据失败')
      tableData.value = []
      pagination.total = 0
    }
  } catch (error) {
    ElMessage.error('获取数据失败，请检查网络连接或联系管理员')
    tableData.value = []
    pagination.total = 0
  }
  ```

### 3. 特产管理页面 (SpecialtyList.vue)

#### 特产列表数据
- **数据类型**：真实数据
- **数据来源**：
  - API接口：`GET /api/admin/specialty/page`
  - 后端控制器：`SpecialtyController.java`
- **错误处理**：当API调用失败时，显示错误信息并清空列表
- **数据处理逻辑**：同景点管理页面

### 4. 停车场管理页面 (ParkingList.vue)

#### 停车场列表数据
- **数据类型**：真实数据
- **数据来源**：
  - API接口：`GET /api/admin/parking/page`
  - 后端控制器：`ParkingController.java`
- **错误处理**：当API调用失败时，显示错误信息并清空列表
- **数据处理逻辑**：同景点管理页面

## API接口配置

### 请求配置
- **Base URL**：`/api`（通过Vite代理转发到 `http://localhost:8080`）
- **认证方式**：Token认证（存储在localStorage中）
- **请求拦截器**：自动添加token到请求头
- **响应拦截器**：统一处理响应状态和错误

### 代理配置 (vite.config.js)
```javascript
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8080',
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api/, '')
    }
  }
}
```

## 数据加载策略

### 1. 真实数据优先
- **唯一数据源**：只从后端API获取真实数据
- **无备选方案**：不再使用模拟数据作为备选
- **明确错误**：API失败时明确提示错误原因

### 2. 错误处理
- **网络错误**：显示友好的错误提示，指导用户检查网络
- **API错误**：根据错误码显示具体错误信息
- **数据为空**：显示空状态页面，提供刷新按钮

### 3. 用户体验
- **加载状态**：显示loading动画
- **错误反馈**：清晰的错误信息和解决建议
- **重试机制**：提供手动刷新功能

## 开发建议

### 1. 数据源管理
- 开发阶段：确保后端服务正常运行，API接口可访问
- 生产环境：所有功能都依赖真实数据，无模拟数据逻辑

### 2. 数据一致性
- 前端数据结构与后端API返回结构保持严格一致
- 及时同步后端数据模型变更

### 3. 性能优化
- 实现数据缓存机制
- 使用分页和虚拟滚动处理大量数据
- 合理使用防抖和节流

## 后续开发计划

### 1. 待完善的真实数据接口
- [ ] 仪表板统计数据接口
- [ ] 用户管理相关接口
- [ ] 订单管理相关接口
- [ ] 系统设置相关接口

### 2. 数据可视化
- [ ] 集成ECharts图表库
- [ ] 实现实时数据更新
- [ ] 添加数据导出功能

### 3. 数据管理优化
- [ ] 实现数据缓存策略
- [ ] 添加数据同步机制
- [ ] 优化大数据量处理

---

**注意**：本文档会随着项目开发进度持续更新，请开发团队及时同步最新信息。